<div class="py-4 mb-2">

    <div class="float-right">
        <%= linkTo(postsPath(), {class: "btn btn-info"}) { %>
        Back to all Posts
        <% } %>
        <%= if (canManagePost(post)) { %>
        <%= linkTo(editPostPath({ post_id: post.ID }), {class: "btn btn-warning", body: "Edit"}) %>
        <%= linkTo(postPath({ post_id: post.ID }), {class: "btn btn-danger", "data-method": "DELETE", "data-confirm": "Are you sure?", body: "Destroy"}) %>
        <% } %>
    </div>
</div>


<div class="media">
    <img class="mr-3" src='<%= postAvatarURL(post) %>' alt="<%= postAuthor(post) %>">
    <div class="media-body">
        <h3 class="d-inline-block"><%= post.Title %></h3>
        <h6 class="mt-0"><%= postAuthor(post) %> <span class="time-ago"><%= timeAgo(post.CreatedAt) %></span></h6>
        <%= markdown(post.Body) %>
    </div>
</div>



<div id="comments">
    <div class="d-flex align-items-center">
        <span class="text-secondary">Loading comments...</span>
        <div class="spinner-border ml-auto text-secondary" role="status" aria-hidden="true"></div>
    </div>
</div>

<script type="text/javascript">
 window.onload = function () {
     $.ajax({
         method: 'GET',
         url: '<%= postCommentsPath({post_id: post.ID}) %>',
         dataType: 'script',
         contentType: 'text/javascript'
     });
 }
</script>
